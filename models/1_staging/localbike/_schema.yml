version: 2

models:
  - name: stg_localbike__brands
    description: "This model contains information about "
    columns:
      - name: brand_id
        description: "Primary key, unique identifier for each brand."
        tests:
          - unique
          - not_null
          - relationships:
              name: brand_id_foreign_key_in_stg_localbike__products
              to: ref('stg_localbike__products')
              field: brand_id
      - name: brand_name


  - name: stg_localbike__categories
    description: "This model contains information about bike categories."
    columns:
      - name: category_id
        description: "Primary key, unique identifier for each bike category."
        tests:
          - unique
          - not_null
          - relationships:
              name: catogory_id_foreign_key_in_stg_localbike__products
              to: ref('stg_localbike__products')
              field: category_id
      - name: category_name
        description: "Name of the category of bike."
      - name: category_type
        description: "Name of the type of the category of bike."


  - name: stg_localbike__customers
    description: "This model contains information about the customers of the localbike company"
    columns:
      - name: customer_id
        description: "Primary key, unique identifier for each ."
        tests:
          - unique
          - not_null
          - relationships:
              name: customer_id_foreign_key_in_stg_localbike__orders
              to: ref('stg_localbike__orders')
              field: customer_id
      - name: customer_first_name
      - name: customer_last_first_name
      - name: customer_phone
      - name: customer_email
      - name: customer_street
      - name: customer_city
      - name: customer_state
      - name: customer_zip_code

  - name: stg_localbike__order_items
    description: "This model contains information about the orders items"
    columns:
      - name: order_item_id
        description: "Primary key, unique identifier for each ."
        tests:
          - unique
          - not_null
          - relationships:
              name: order_id_foreign_key_in_stg_localbike__orders
              to: ref('stg_localbike__orders')
              field: cast(order_id as string)
          - relationships:
              name: product_id_foreign_key_in_stg_localbike__products
              to: ref('stg_localbike__products')
              field: product_id
      - name: item_id
      - name: quantity
      - name: list_price
      - name: discount
      - name: net_price
      - name: gross_sales_amount
      - name: net_sales_amount
      - name: discuont_amount

  - name: stg_localbike__orders
    description: "This model contains information about the orders"
    columns:
      - name: order_id
        description: "Primary key, unique identifier for each ."
        tests:
          - unique
          - not_null
          - relationships:
              name: order_id_foreign_key_in_stg_localbike__order_items
              to: ref('stg_localbike__order_items')
              field: order_id
      - name: customer_id
      - name: order_status_label
      - name: order_date
      - name: required_date
      - name: shipped_date
      - name: days_to_ship_order
      - name: store_id
      - name: staff_id 

  - name: stg_localbike__products
    description: "This model contains information about the products"
    columns:
      - name: product_id
        description: "Primary key, unique identifier for each ."
        tests:
          - unique
          - not_null
          - relationships:
              name: product_id_foreign_key_in_stg_localbike__order_items
              to: ref('stg_localbike__order_items')
              field: product_id
      - name: product_name
      - name: brand_id
      - name: category_id
      - name: model_year
      - name: list_price 
        

  - name: stg_localbike__staffs
    description: "This model contains information about the staff"
    columns:
      - name: staff_id
        description: "Primary key, unique identifier for each ."
        tests:
          - unique
          - not_null
          - relationships:
              name: staff_id_foreign_key_in_stg_localbike__orders
              to: ref('stg_localbike__orders')
              field: staff_id
      - name: staff_first_name
      - name: staff_last_name
      - name: staff_email
      - name: staff_phone
      - name: active
      - name: store_id
      - name: manager_id
      - name: manager_first_name
      - name: manager_last_name

  - name: stg_localbike__stocks
    description: "This model contains information about the stock at a given time"
    columns:
      - name: store_product_id
        description: "Primary key, unique identifier for each ."
        tests:
          - unique
          - not_null
          - relationships:
              name: store_id_foreign_key_in_stg_localbike__stores 
              to: ref('stg_localbike__stores')
              field: store_id
          - relationships:
              name: product_id_foreign_key_in_stg_localbike__products 
              to: ref('stg_localbike__products')
              field: product_id
      - name: stocks_quantity 


  - name: stg_localbike__stores
    description: "This model contains information about the stores"
    columns:
      - name: store_id
        description: "Primary key, unique identifier for each ."
        tests:
          - unique
          - not_null
      - name: store_name
      - name: store_phone
      - name: store_email
      - name: store_street
      - name: store_city
      - name: store_state
      - name: store_zip_code
    